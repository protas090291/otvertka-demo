# üìÖ –†–∞—Å—á–µ—Ç –ø—Ä–∏—Ä–æ—Å—Ç–∞ —Å —É—á–µ—Ç–æ–º —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞**
–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ +100% –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —Å—É–±–±–æ—Ç—É –∑–∞–ø–∏—Å–µ–π –Ω–µ –±—ã–ª–æ, —Ö–æ—Ç—è –≤ –ø—è—Ç–Ω–∏—Ü—É (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å) –±—ã–ª–∏ –∑–∞–ø–∏—Å–∏.

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ**
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—á–µ—Ç–∞ —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞).

## üîß **–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞**

### **1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π:**
```typescript
const isWorkday = (date: Date): boolean => {
  const dayOfWeek = date.getDay();
  return dayOfWeek >= 1 && dayOfWeek <= 5; // 1 = –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 5 = –ø—è—Ç–Ω–∏—Ü–∞
};
```

### **2. –ü–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è:**
```typescript
const getLastWorkday = (fromDate: Date): string => {
  let currentDate = new Date(fromDate);
  currentDate.setDate(currentDate.getDate() - 1); // –ù–∞—á–∏–Ω–∞–µ–º —Å –≤—á–µ—Ä–∞
  
  // –ò—â–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å (–º–∞–∫—Å–∏–º—É–º 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥)
  for (let i = 0; i < 7; i++) {
    if (isWorkday(currentDate)) {
      return currentDate.toISOString().split('T')[0];
    }
    currentDate.setDate(currentDate.getDate() - 1);
  }
  
  return new Date(fromDate).toISOString().split('T')[0];
};
```

### **3. –†–∞—Å—á–µ—Ç —Å —É—á–µ—Ç–æ–º —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π:**
```typescript
const calculateLocalStats = (entriesData: WorkJournalEntry[]) => {
  const today = new Date();
  const todayStr = today.toISOString().split('T')[0];
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å
  const shouldCountToday = isWorkday(today);
  
  // –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å
  const lastWorkdayStr = getLastWorkday(today);
  
  // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç
  const todayWorks = shouldCountToday ? entriesData.filter(entry => entry.work_date === todayStr).length : 0;
  const lastWorkdayWorks = entriesData.filter(entry => entry.work_date === lastWorkdayStr).length;

  // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏—Ä–æ—Å—Ç
  let dailyGrowth = 0;
  if (lastWorkdayWorks === 0) {
    dailyGrowth = todayWorks > 0 ? 100 : 0;
  } else {
    dailyGrowth = Math.round(((todayWorks / lastWorkdayWorks) * 100 - 100));
  }

  return { total_progress_gained: dailyGrowth, ... };
};
```

## üìä **–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ**
- **–°–µ–≥–æ–¥–Ω—è:** –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ (–Ω–µ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å) = **0 —Ä–∞–±–æ—Ç**
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å:** –ü—è—Ç–Ω–∏—Ü–∞ = **3 —Ä–∞–±–æ—Ç—ã**
- **–ü—Ä–∏—Ä–æ—Å—Ç:** (0/3) * 100 - 100 = **-100%** ‚úÖ

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫**
- **–°–µ–≥–æ–¥–Ω—è:** –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ (—Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å) = **2 —Ä–∞–±–æ—Ç—ã**
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å:** –ü—è—Ç–Ω–∏—Ü–∞ = **3 —Ä–∞–±–æ—Ç—ã**
- **–ü—Ä–∏—Ä–æ—Å—Ç:** (2/3) * 100 - 100 = **-33%** ‚úÖ

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—è—Ç–Ω–∏—Ü–∞**
- **–°–µ–≥–æ–¥–Ω—è:** –ü—è—Ç–Ω–∏—Ü–∞ (—Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å) = **5 —Ä–∞–±–æ—Ç**
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å:** –ß–µ—Ç–≤–µ—Ä–≥ = **4 —Ä–∞–±–æ—Ç—ã**
- **–ü—Ä–∏—Ä–æ—Å—Ç:** (5/4) * 100 - 100 = **+25%** ‚úÖ

### **–°—Ü–µ–Ω–∞—Ä–∏–π 4: –°—É–±–±–æ—Ç–∞**
- **–°–µ–≥–æ–¥–Ω—è:** –°—É–±–±–æ—Ç–∞ (–Ω–µ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å) = **0 —Ä–∞–±–æ—Ç**
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å:** –ü—è—Ç–Ω–∏—Ü–∞ = **3 —Ä–∞–±–æ—Ç—ã**
- **–ü—Ä–∏—Ä–æ—Å—Ç:** (0/3) * 100 - 100 = **-100%** ‚úÖ

## üéØ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**

### **–†–∞–±–æ—á–∏–µ –¥–Ω–∏ (–ø–Ω-–ø—Ç):**
- ‚úÖ –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞—Å—á–µ—Ç–µ –ø—Ä–∏—Ä–æ—Å—Ç–∞
- ‚úÖ –°—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Ä–∞–±–æ—á–∏–º –¥–Ω–µ–º

### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏ (—Å–±-–≤—Å):**
- ‚ùå –ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ "—Å–µ–≥–æ–¥–Ω—è"
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### **–ü–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è:**
- üîç –ò—â–µ—Ç –Ω–∞–∑–∞–¥ –º–∞–∫—Å–∏–º—É–º –Ω–∞ 7 –¥–Ω–µ–π
- üìÖ –ù–∞—Ö–æ–¥–∏—Ç –±–ª–∏–∂–∞–π—à–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å (–ø–Ω-–ø—Ç)
- üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤—ã—Ö–æ–¥–Ω—ã–º–∏ –¥–Ω—è–º–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç, —Å—Ä–∞–≤–Ω–∏–≤–∞—è —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏!

## üìù **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**
"–ü—Ä–∏—Ä–æ—Å—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç —Å–µ–≥–æ–¥–Ω—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Ä–∞–±–æ—á–µ–º—É –¥–Ω—é (—Ç–æ–ª—å–∫–æ –ø–Ω-–ø—Ç)."


